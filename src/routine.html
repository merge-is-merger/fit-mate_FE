<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitmate</title>
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <link rel="stylesheet" href="routine.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700&display=swap">
    <script src="routine_be.js" defer></script>
</head>
<body>
    <!-------------about------->
    <div id="header" class="section-container">

        <div class="container">
            <nav>
                <ul id="sidemenu">
                    <li><a href="index.html">홈</a></li>
                    <li><a href="routine.html">마이루틴</a></li>
                    <li><a href="challenge.html" class="nav-challenge">챌린지</a></li>
                </ul>
                <a href="#header"><img src="images/fitmate.png" class="logo"></a>
            
            </nav>

        </div>


    </div>
  <!-------------pagecontainers------->
  <div id="pageContainer">
      <div id="blocklyDiv"></div>
      <div id="imageSection">
          <div class="exercise-section">
              <div class="button-group">
                  <button class="exercise-button" onclick="showExercise('chest')">가슴</button>
                  <button class="exercise-button" onclick="showExercise('back')">등</button>
                  <button class="exercise-button" onclick="showExercise('shoulder')">어깨</button>
                  <button class="exercise-button" onclick="showExercise('arm')">팔</button>
                  <button class="exercise-button" onclick="showExercise('leg')">하체</button>
              </div>
              <div id="chest" class="exercise-content active">
                  <div class="exercise-item">
                      <h3>체스트 프레스</h3>
                      <img src="images/chest/chestpress.gif" alt="체스트 프레스 움짤">
                      <p><strong>주요 근육: </strong> 대흉근, 삼두근</p>
                      <p>이 운동은 바벨을 밀어올리는 동작을 통해 가슴 근육과 상체의 힘을 강화하는 운동입니다.</p>
                      <p><strong>반복 횟수: </strong>3세트 1분 30초</p>
                  </div>
                  <div class="exercise-item">
                      <h3>인클라인 푸시업</h3>
                      <img src="images/chest/incline_pushup.gif" alt="인클라인 푸시업 움짤">
                      <p><strong>주요 근육: </strong> 상부 가슴</p>
                      <p>이 운동은 가슴 플라이 동작을 위한 머신에서 수행됩니다. 
                        가슴 근육을 고립시키고 강화하는 데 효과적입니다.</p>
                      <p><strong>반복 횟수: </strong> 3세트 1분 15초</p>
                  </div>
                  <div class="exercise-item">
                      <h3>펙덱 플라이</h3>
                      <img src="images/chest/pec_deck_fly.gif" alt="펙덱 플라이 움짤">
                      <p><strong>주요 근육: </strong> 바깥 가슴</p>
                      <p>이 운동은 가슴 근육의 바깥쪽을 효과적으로 자극합니다.</p>
                      <p><strong>반복 횟수: </strong> 4세트 1분 30초</p>
                  </div>
              </div> <!--가슴운동 루틴 끝-->
              <div id="back" class="exercise-content">
                <div class="exercise-item">
                  <h3>레버 프론트 풀 다운</h3>
                  <img src="images/back/lever_front_pulldown.gif" alt="체스트 프레스 움짤">
                  <p><strong>주요 근육: </strong>등/광배근</p>
                  <p>이 운동은 머신을 사용하여 레버를 아래로 당기는 동작으로 수행됩니다.</p>
                  <p><strong>반복 횟수: </strong>3세트 1분 15초</p>

              </div>
              <div class="exercise-item">
                  <h3>풀 업</h3>
                  <img src="images/back/pull_up.gif" alt="인클라인 푸시업 움짤">
                  <p><strong>주요 근육: </strong>등/광배근</p>
                  <p>이 운동은 자신의 체중을 이용하여 바를 잡고 몸을 위로 당기는 운동입니다.</p>
              </div>
              <div class="exercise-item">
                  <h3>케이블 리어 풀 다운</h3>
                  <img src="images/back/cable_rear_pulldown.gif" alt="펙덱 플라이 움짤">
                  <p><strong>주요 근육: </strong>등/광배근</p>
                  <p>이 운동은 등 근육과 광배근을 타겟으로 합니다.</p>
              </div>
              </div> <!--등 운동 루틴 끝-->
              <div id="shoulder" class="exercise-content">
                <div class="exercise-item">
                  <h3>스미스 머신 숄더 프레스</h3>
                  <img src="images/shoulder/Smith_Machine_ShoulderPress.gif" alt="체스트 프레스 움짤">
                  <p><strong>주요 근육: </strong>어깨</p>
                  <p>스미스 머신을 사용해 어깨 근육을 강화하는 운동으로, 바벨을 잡고 머리 위로 들어 올립니다. 
                    안정적인 궤도로 움직여 초보자에게 적합합니다.</p>
                  <p><strong>반복 횟수: 3세트 1분</strong></p>
              </div>
              <div class="exercise-item">
                  <h3>플라이 머신</h3>
                  <img src="images/shoulder/fly_machine.gif" alt="인클라인 푸시업 움짤">
                  <p><strong>주요 근육: </strong>어깨</p>
                  <p>어깨 후면(리어 델트)을 강화하는 운동으로, 앉아서 손잡이를 뒤로 당기며 어깨 후면을 자극합니다.
                     자세를 유지하기 쉽고, 목표 근육을 집중적으로 단련할 수 있습니다.</p>
                     <p><strong>반복 횟수: 3세트 1분 15초</strong></p>
              </div>
              <div class="exercise-item">
                  <h3>페이스 풀 다운</h3>
                  <img src="images/shoulder/face_pulldown.gif" alt="펙덱 플라이 움짤">
                  <p><strong>주요 근육: </strong>어깨</p>
                  <p>케이블 머신을 이용해 얼굴 방향으로 로프를 당기는 운동으로, 어깨 후면과 상부 등 근육을 강화합니다. 
                    안정성과 균형을 향상시켜 부상 예방에 도움됩니다.</p>
                    <p><strong>반복 횟수: 3세트 1분 15초</strong></p>
              </div>
              </div><!--어깨 운동 루틴 끝-->
              <div id="arm" class="exercise-content">
                <div class="exercise-item">
                  <h3>덤벨 리버스 컬</h3>
                  <img src="images/arm/reverse_curl.gif" alt="체스트 프레스 움짤">
                  <p><strong>주요 근육: </strong>이두근, 팔뚝</p>
                  <p>이 운동은 덤벨을 사용하여 손바닥이 아래를 향하도록 (오버핸드 그립) 하여 팔꿈치를 구부리는 동작을 포함합니다. 
                    주로 이두근과 팔뚝 근육을 강화하는 데 효과적입니다.</p>
                    <p><strong>반복 횟수: 3세트 1분 30초</strong></p>
              </div>
              <div class="exercise-item">
                  <h3>덤벨 시티드 뉴트럴 리스트 컬</h3>
                  <img src="images/arm/neutral_list_curl.gif" alt="인클라인 푸시업 움짤">
                  <p><strong>주요 근육: </strong>팔뚝</p>
                  <p>이 운동은 덤벨을 사용하여 시티드 포지션에서 손바닥이 서로 마주 보게 하여 (뉴트럴 그립) 손목을 구부리는 동작을 포함합니다. 
                    주로 팔뚝 근육을 타겟으로 하여 손목과 전완근의 힘을 강화하는 데 효과적입니다.</p>
                    <p><strong>반복 횟수: 3세트 1분 15초</strong></p>
              </div>
              <div class="exercise-item">
                  <h3>물병 해머 컬</h3>
                  <img src="images/arm/water_bottle_hammer_curl.gif " alt="펙덱 플라이 움짤">
                  <p><strong>주요 근육: </strong>이두근, 팔뚝</p>
                  <p><strong>반복 횟수: 3세트 1분</strong></p>
              </div>
              </div><!--팔 운동 루틴 끝-->
              <div id="leg" class="exercise-content">
                <div class="exercise-item">
                  <h3>덤벨 워킹 런지</h3>
                  <img src="images/lower/walking_lunge.gif" alt="체스트 프레스 움짤">
                  <p><strong>주요 근육: </strong>엉덩이, 다리</p>
                  <p>이 운동은 덤벨을 사용하여 한 발씩 앞으로 내딛으며 런지 자세를 반복하는 동작을 포함합니다. 
                    주로 전신, 엉덩이, 다리 근육을 타겟으로 하여 전신의 근력을 강화하는 데 효과적입니다.</p>
                  <p><strong>반복 횟수: 3세트 1분 15초(한 쪽 다리당)</strong></p>
              </div>
              <div class="exercise-item">
                  <h3>덤벨 데드리프트</h3>
                  <img src="images/lower/deadlift.gif" alt="인클라인 푸시업 움짤">
                  <p><strong>주요 근육: </strong>척추 기립근, 엉덩이, 다리</p>
                  <p>이 운동은 덤벨을 사용하여 상체를 앞으로 숙였다가 일어서는 동작을 포함합니다. 
                    주로 척추기립근, 엉덩이, 다리 근육을 타겟으로 하여 전신의 근력을 강화하는 데 효과적입니다.</p>
                  <p><strong>반복 횟수: 3세트 1분 30초</strong></p>
              </div>
              <div class="exercise-item">
                  <h3>물병 고블릿 스쿼트</h3>
                  <img src="images/lower/goblit_squot.gif" alt="펙덱 플라이 움짤">
                  <p><strong>주요 근육: </strong>엉덩이, 다리</p>
                  <p>이 운동은 덤벨을 가슴 앞에 들고 스쿼트 자세를 취하는 동작을 포함합니다. 
                    주로 엉덩이와 다리 근육을 타겟으로 하여 하체 근력을 강화하는 데 효과적입니다.</p>
                  <p><strong>반복 횟수: 3세트 1분 30초</strong></p>
              </div><!--하체 운동 루틴 끝-->
              </div>
          </div>
      </div>
      <div id="outputPane">
        <pre id="generatedCode"><code></code></pre>
        <div id="output"></div>
        <h3>운동 타이머</h3>
        <div id="exerciseTimer">
          <div class="timer">
              <button id="decreaseExerciseMinutes">-</button>
              <span id="exerciseMinutes">01</span>
              <button id="increaseExerciseMinutes">+</button>
              :
              <button id="decreaseExerciseSeconds">-</button>
              <span id="exerciseSeconds">30</span>
              <button id="increaseExerciseSeconds">+</button>
          </div>
          <button id="startExercise">시작</button>
          <button id="pauseExercise">일시정지</button>
          <button id="resetExercise">종료</button>
      </div>
      <div id="exerciseSetCounter"><span id="exerciseSetCount">0</span> 세트</div>
      <h3>휴식 타이머</h3>
        <div id="restTimer">
            <div class="timer">
                <span id="restMinutes">01</span>:<span id="restSeconds">00</span>
            </div>
            <button id="startRest">시작</button>
            <button id="pauseRest">일시정지</button>
            <button id="resetRest">종료</button>
        </div>
        <button id="endRoutine">루틴 종료</button>
    </div>
  </div>


  <xml id="toolbox" style="display: none">
    <category name="가슴 운동" colour="#EA4848" style="margin-bottom: 10px;">
      <block type="chest_exercise_category"></block>
      <block type="chest_press"></block>
      <block type="incline_push_up"></block>
      <block type="peck_deck_fly"></block>
    </category>
    <category name="등 운동" colour="#5F94E3" style="margin-bottom: 10px;">
      <block type="back_exercise_category"></block>
      <block type="Lever_Front_Pulldown"></block>
      <block type="Pull_Up"></block>
      <block type="Cable_Rear_Pulldown"></block>
    </category>
    <category name="어깨 운동" colour="#29B561" style="margin-bottom: 10px;">
      <block type="shoulder_exercise_category"></block>
      <block type="SMITH_MACHINE_SHOULDER_PRESS"></block>
      <block type="FLY_MACHINE"></block>
      <block type="FACE_FULL"></block>
    </category>
    <category name="팔 운동" colour="#AB68D4" style="margin-bottom: 10px;">
      <block type="arm_exercise_category" ></block>
      <block type="Dumbbell_Reverse_Curl"></block>
      <block type="Dumbbell_Seated_Neutral_Wrist_Curl"></block>
      <block type="Water_Bottle_Hammer_Curl"></block>
    </category>
    <category name="하체 운동" colour="#2B48B4" style="margin-bottom: 10px;">
      <block type="lower_body_exercise_category"></block>
      <block type="Dumbbell_Walking_Lunge"></block>
      <block type="Dumbbell_Deadlift"></block>
      <block type="Dumbbell_Goblet_Squat"></block>
    </category>
  </xml>
    
    <script src="routine.js"></script>

  <script>
    var workspace = Blockly.inject('blocklyDiv', {
      toolbox: document.getElementById('toolbox'),
      scrollbars: true,
      trashcan: true,
      zoom: {
        controls: true,
        wheel: true,
        startScale: 1.0,
        maxScale: 3,
        minScale: 0.3,
        scaleSpeed: 1.2
      }
     
    });

    Blockly.Blocks['chest_press'] = {
init: function() {
this.appendDummyInput()
    .appendField("체스트 프레스");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#EA4848');
this.setTooltip("체스트 프레스 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['incline_push_up'] = {
init: function() {
this.appendDummyInput()
    .appendField("인클라인 푸시업");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#EA4848');
this.setTooltip("인클라인 푸시업 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['peck_deck_fly'] = {
init: function() {
this.appendDummyInput()
    .appendField("펙 덱 플라이");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#EA4848');
this.setTooltip("펙 덱 플라이 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['chest_exercise_category'] = {
init: function() {
this.appendDummyInput()
    .appendField("가슴 운동");
this.appendStatementInput("EXERCISES")
    .setCheck(null);
this.setColour('#EA4848');
this.setTooltip("가슴 운동 블록들을 포함합니다");
this.setHelpUrl("");
}
}; //가슴운동루틴

Blockly.Blocks['Lever_Front_Pulldown'] = {
init: function() {
this.appendDummyInput()
    .appendField("레버 프론트 풀 다운");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#5F94E3');   // BlueColour(230);
this.setTooltip("레버 프론트 풀 다운 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['Pull_Up'] = {
init: function() {
this.appendDummyInput()
    .appendField("풀 업");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#5F94E3');   // Blue
this.setTooltip("풀 업 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['Cable_Rear_Pulldown'] = {
init: function() {
this.appendDummyInput()
    .appendField("케이블 리어 풀 다운");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#5F94E3');   // Blue
this.setTooltip("케이블 리어 풀 다운 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['back_exercise_category'] = {
init: function() {
this.appendDummyInput()
    .appendField("등 운동");
this.appendStatementInput("EXERCISES")
    .setCheck(null);
    this.setColour('#5F94E3');   // Blue
this.setTooltip("등 운동 블록들을 포함합니다");
this.setHelpUrl("");
}
}; //등 운동 루틴

    
Blockly.Blocks['SMITH_MACHINE_SHOULDER_PRESS'] = {
init: function() {
this.appendDummyInput()
    .appendField("스미스 머신 숄더 프레스");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#29B561');   // Green
this.setTooltip("스미스 머신 숄더 프레스 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['FLY_MACHINE'] = {
init: function() {
this.appendDummyInput()
    .appendField("플라이 머신");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#29B561');   // Green
this.setTooltip("풀 업 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['FACE_FULL'] = {
init: function() {
this.appendDummyInput()
    .appendField("페이스 풀");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#29B561');   // Green
this.setTooltip("페이스 풀 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['shoulder_exercise_category'] = {
init: function() {
this.appendDummyInput()
    .appendField("어깨 운동");
this.appendStatementInput("EXERCISES")
    .setCheck(null);
this.setColour('#29B561'); // Purple
this.setTooltip("어깨 운동 블록들을 포함합니다");
this.setHelpUrl("");
}
}; //어깨 운동 루틴

Blockly.Blocks['Dumbbell_Reverse_Curl'] = {
init: function() {
this.appendDummyInput()
    .appendField("덤벨 리버스 컬");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#AB68D4'); // Purple
this.setTooltip("덤벨 리버스 컬 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['Dumbbell_Seated_Neutral_Wrist_Curl'] = {
init: function() {
this.appendDummyInput()
    .appendField("덤벨 시티드 뉴트럴 리스트 컬");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#AB68D4'); // Purple
this.setTooltip("덤벨 데드리프트 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['Water_Bottle_Hammer_Curl'] = {
init: function() {
this.appendDummyInput()
    .appendField("물병 해머 컬");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#AB68D4'); // Purple
this.setTooltip("물병 해머 컬 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['arm_exercise_category'] = {
init: function() {
this.appendDummyInput()
    .appendField("팔 운동");
this.appendStatementInput("EXERCISES")
    .setCheck(null);
this.setColour('#AB68D4'); // Yellow

this.setTooltip("팔 운동 블록들을 포함합니다");
this.setHelpUrl("");
}
}; //팔 운동 루틴
    
Blockly.Blocks['Dumbbell_Walking_Lunge'] = {
init: function() {
this.appendDummyInput()
    .appendField("덤벨 워킹 런지");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#2B48B4'); // Yellow
this.setTooltip("덤벨 워킹 런지 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['Dumbbell_Deadlift'] = {
init: function() {
this.appendDummyInput()
    .appendField("덤벨 데드리프트");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#2B48B4'); // Yellow

this.setTooltip("덤벨 데드리프트 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['Dumbbell_Goblet_Squat'] = {
init: function() {
this.appendDummyInput()
    .appendField("덤벨 고블릿 스쿼트");
this.setPreviousStatement(true, null);
this.setNextStatement(true, null);
this.setColour('#2B48B4'); // Yellow

this.setTooltip("덤벨 고블릿 스쿼트 운동을 수행합니다");
this.setHelpUrl("");
}
};

Blockly.Blocks['lower_body_exercise_category'] = {
init: function() {
this.appendDummyInput()
    .appendField("하체 운동");
this.appendStatementInput("EXERCISES")
    .setCheck(null);
    this.setColour('#2B48B4'); // Yellow

this.setTooltip("하체 운동 블록들을 포함합니다");
this.setHelpUrl("");
}
}; //하체 운동 루틴
        
        // 운동 루틴 생성 함수
        function generateRoutine() {
          var code = Blockly.JavaScript.workspaceToCode(workspace);
          document.getElementById('generatedCode').textContent = code;
        }
  
        // 작업 영역 변경 시 운동 루틴 자동 생성
        workspace.addChangeListener(generateRoutine);

        function showExercise(type) {
            document.querySelectorAll('.exercise-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(type).classList.add('active');
        }

        // 초기 설정: 가슴 운동 콘텐츠 활성화
        showExercise('chest');

// 운동 타이머
let exerciseTimer;
let exerciseMinutes = 1;
let exerciseSeconds = 30;
let isExerciseRunning = false;
let exerciseSets = 0;
// 실제 운동한 시간 저장하는 전역변수
let totalExerciseTimeSeconds = 0;
let currentSetStartTime = 0;

// 휴식 타이머
let restTimer;
let restMinutes = 1;
let restSeconds = 0;
let isRestRunning = false;
let restSets = 0;

// DOM 요소
const exerciseMinutesDisplay = document.getElementById('exerciseMinutes');
const exerciseSecondsDisplay = document.getElementById('exerciseSeconds');
const exerciseSetCountDisplay = document.getElementById('exerciseSetCount');
const startExerciseButton = document.getElementById('startExercise');
const pauseExerciseButton = document.getElementById('pauseExercise');
const resetExerciseButton = document.getElementById('resetExercise');
const decreaseExerciseMinutesButton = document.getElementById('decreaseExerciseMinutes');
const increaseExerciseMinutesButton = document.getElementById('increaseExerciseMinutes');
const decreaseExerciseSecondsButton = document.getElementById('decreaseExerciseSeconds');
const increaseExerciseSecondsButton = document.getElementById('increaseExerciseSeconds');

const restMinutesDisplay = document.getElementById('restMinutes');
const restSecondsDisplay = document.getElementById('restSeconds');
const restSetCountDisplay = document.getElementById('restSetCount');
const startRestButton = document.getElementById('startRest');
const pauseRestButton = document.getElementById('pauseRest');
const resetRestButton = document.getElementById('resetRest');

const endRoutineButton = document.getElementById('endRoutine');

function updateExerciseDisplay() {
    exerciseMinutesDisplay.textContent = exerciseMinutes.toString().padStart(2, '0');
    exerciseSecondsDisplay.textContent = exerciseSeconds.toString().padStart(2, '0');
    exerciseSetCountDisplay.textContent = exerciseSets;
}

function updateRestDisplay() {
    restMinutesDisplay.textContent = restMinutes.toString().padStart(2, '0');
    restSecondsDisplay.textContent = restSeconds.toString().padStart(2, '0');
}

function startExercise() {
    if (!isExerciseRunning) {
        isExerciseRunning = true;
        currentSetStartTime = Date.now();
        exerciseTimer = setInterval(() => {
            if (exerciseSeconds > 0 || exerciseMinutes > 0) {
                if (exerciseSeconds === 0) {
                    exerciseMinutes--;
                    exerciseSeconds = 59;
                } else {
                    exerciseSeconds--;
                }
                updateExerciseDisplay();
            } else {
                clearInterval(exerciseTimer);
                isExerciseRunning = false;
                exerciseSets++;
                updateExerciseDisplay();
                endExerciseSet();
                alert('운동 세트 완료! 휴식을 시작하세요.');
            }
        }, 1000);
    }
}

function pauseExercise() {
    if (isExerciseRunning) {
        clearInterval(exerciseTimer);
        isExerciseRunning = false;
        totalExerciseTimeSeconds += Math.floor((Date.now() - currentSetStartTime) / 1000);
    }
}

function resetExercise() {
    clearInterval(exerciseTimer);
    isExerciseRunning = false;
    exerciseMinutes = 1;
    exerciseSeconds = 30;
    updateExerciseDisplay();
}

function endExerciseSet() {
    totalExerciseTimeSeconds += Math.floor((Date.now() - currentSetStartTime) / 1000);
}

function decreaseExerciseMinutes() {
    if (exerciseMinutes > 0) {
        exerciseMinutes--;
        updateExerciseDisplay();
    }
}

function increaseExerciseMinutes() {
    exerciseMinutes++;
    updateExerciseDisplay();
}

function decreaseExerciseSeconds() {
    if (exerciseSeconds >= 15) {
        exerciseSeconds -= 15;
    } else if (exerciseMinutes > 0) {
        exerciseMinutes--;
        exerciseSeconds = 45;
    } else {
        exerciseSeconds = 0;
    }
    displaySeconds = exerciseSeconds;
    updateExerciseDisplay();
}

function increaseExerciseSeconds() {
    if (exerciseSeconds < 45) {
        exerciseSeconds += 15;
    } else {
        exerciseSeconds = 0;
        exerciseMinutes++;
    }
    displaySeconds = exerciseSeconds;
    updateExerciseDisplay();
}

function startRest() {
    if (!isRestRunning) {
        isRestRunning = true;
        restTimer = setInterval(() => {
            if (restSeconds > 0 || restMinutes > 0) {
                if (restSeconds === 0) {
                    restMinutes--;
                    restSeconds = 59;
                } else {
                    restSeconds--;
                }
                updateRestDisplay();
            } else {
                clearInterval(restTimer);
                isRestRunning = false;
                restSets++;
                restMinutes = 1;
                restSeconds = 0;
                updateRestDisplay();
                alert('휴식 완료! 다음 운동 세트를 시작하세요.');
            }
        }, 1000);
    }
}

function pauseRest() {
    clearInterval(restTimer);
    isRestRunning = false;
}

function resetRest() {
    clearInterval(restTimer);
    isRestRunning = false;
    restMinutes = 1;
    restSeconds = 0;
    restSets++;
    updateRestDisplay();
}

function endRoutine() {
    clearInterval(exerciseTimer);
    clearInterval(restTimer);
    
    if (isExerciseRunning) {
        endExerciseSet();
    }
    
    isExerciseRunning = false;
    isRestRunning = false;
    
    let hours = Math.floor(totalExerciseTimeSeconds / 3600);
    let minutes = Math.floor((totalExerciseTimeSeconds % 3600) / 60);
    let seconds = totalExerciseTimeSeconds % 60;
    
    let timeString = '';
    if (hours > 0) timeString += hours + '시간 ';
    if (minutes > 0 || hours > 0) timeString += minutes + '분 ';
    timeString += seconds + '초';

    let message = '운동이 완료되었습니다! 수고하셨습니다!\n\n';
    message += '총 운동 시간: ' + timeString + '\n';
    message += '완료한 세트 수: ' + exerciseSets;

    alert(message);

    // 타이머 리셋
    exerciseMinutes = 1;
    exerciseSeconds = 30;
    exerciseSets = 0;
    restMinutes = 1;
    restSeconds = 0;
    restSets = 0;
    totalExerciseTimeSeconds = -1;
    updateExerciseDisplay();
    updateRestDisplay();
}


startExerciseButton.addEventListener('click', startExercise);
pauseExerciseButton.addEventListener('click', pauseExercise);
resetExerciseButton.addEventListener('click', resetExercise);
decreaseExerciseMinutesButton.addEventListener('click', decreaseExerciseMinutes);
increaseExerciseMinutesButton.addEventListener('click', increaseExerciseMinutes);
decreaseExerciseSecondsButton.addEventListener('click', decreaseExerciseSeconds);
increaseExerciseSecondsButton.addEventListener('click', increaseExerciseSeconds);

startRestButton.addEventListener('click', startRest);
pauseRestButton.addEventListener('click', pauseRest);
resetRestButton.addEventListener('click', resetRest);

endRoutineButton.addEventListener('click', endRoutine);

updateExerciseDisplay();
      </script>
</body>
</html>
